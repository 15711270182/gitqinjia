<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="divport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
    <meta name="divport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>会员</title>


    <script type="text/javascript" src="/static/website/js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="/static/website/js/autosize.js?v=1"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
	
    <style type="text/css">
        *{margin: 0;padding: 0;}
        html,body{height: 100%;background-color:#2D2926;}
		a{text-decoration:none;color: #0C0C0C}
		#contenter{margin: 0 auto;height:100%;position: relative;font-family:arial;}
		#header{width:100%;height:11.4rem;position:relative;}
		#header img{width:100%;height:11.4rem;}
		#content{width:19.551rem;height:13.68rem;position:absolute;z-index:1; top:8.949rem;left:0;right:0;margin:0 auto;background: #39342F;border-radius: 0.912rem;}
		#content .content{width:19.551rem;height:13.68rem;position:relative;}
		#content .userinfo{height:2.05rem;padding: 1.14rem 0.912rem;display: flex;justify-content: flex-start;align-items: center;}
		#content .userinfo .avatar{width: 2.05rem;height: 2.05rem;}
		#content .userinfo .avatar img{width:2.05rem;height: 2.05rem;border: 1px solid #FFE3A2;border-radius: 1.1rem;}
		#content .userinfo .name_date{height: 2.05rem;padding: 0rem 0.342rem;}
		#content .userinfo .name_date .nickname{height: 1.026rem;line-height: 1.026rem;font-weight: 700;font-size: 0.798rem;color: #FFFFFF;}
		#content .userinfo .name_date .date{height: 1.026rem;line-height: 1.026rem;font-weight: 400;color: rgba(255, 255, 255, 0.4);font-size: 0.741rem;}
		#content .list{height: 6.35rem;width: 19.55rem;padding: 0px 0.621rem;overflow-y: hidden; overflow-x: auto;}
		#content .list .lists{height: 6.35rem;}
		#content .list .lists .li{position: relative;padding:0.969rem 0rem 0rem; width: 5.529rem;height: 5.3rem;background: rgba(0, 0, 0, 0.12);border-radius: 0.684rem;display: flex;flex-direction: column;align-items: center;float: left;margin: 0px 0.285rem;}
		#content .list .lists .active{border: 1px solid #FFE0A2;background: #39342F;}
		#content .list .lists .active::before{content: "";position: absolute;z-index: 1;width: 1.14em;height: 1.14rem;right: -2px;bottom: -2px; background-image: url("https://resource.njweiyi2.com/7.26.2.png");background-size: 100% 100%;}
		#content .list .lists .li .tj{position: absolute;z-index: 1;left: 0;top: -0.05rem;text-align: center;line-height: 1.026rem;font-size: 0.627rem;color: #FFFFFF; width: 1.938rem;height: 1.026rem;background: #FF8913;border-radius: 0.456rem 0px 0.456rem 0px;}
		#content .list .lists .li .d{height: 1.368rem;width: max-content; line-height: 1.368rem;color: #FFFFFF;font-size:  0.798rem;}
		#content .list .lists .li .m{height:  1.938rem;line-height: 1.938rem;width: max-content;font-size:  0.798rem;font-weight: 700;color: #FFE0A2;}
		#content .list .lists .li .m span{font-size: 1.704rem;}
		#content .list .lists .li .t{height: 1.596rem;line-height: 1.14rem;padding: 0.278rem 0px;width: max-content; font-size: 0.741rem; color: rgba(255, 255, 255, 0.8);}
		#content .tips{height: 3.078rem;display: flex;justify-content: center;align-items: center;position: relative;}
		#content .tips::before{content: "";position: absolute;z-index: 1;left: 2.28rem;top:  1.475rem; width: 0.228rem;height: 0.228rem;background: #FF8913;border-radius: 0.13rem;}
		#content .tips::after{content: "";position: absolute;z-index: 1;right: 2.28rem;top:  1.475rem; width: 0.228rem;height: 0.228rem;background: #FF8913;border-radius: 0.13rem;}
		#content .tips .t{height:  1.14rem;width: max-content;font-weight: 400;color: #FF8913;font-size:  0.798rem;position: relative;}
		#content .tips .t::before{content: "";position: absolute;z-index: 1;left: -0.57rem;top: 0.456rem; width:0.342rem;height: 0.342rem;background: #FF8913;border-radius: 0.18rem;}
		#content .tips .t::after{content: "";position: absolute;z-index: 1;right: -0.57rem;top: 0.456rem; width:0.342rem;height:0.342rem;background: #FF8913;border-radius: 0.18rem;}
		#list{width: 19.551rem;height: 16.53rem;background: #39342F;border-radius:0.684rem;margin:0 auto;}
		#list .title{height: 1.254rem;padding: 1.14rem 0.912rem;line-height: 1.254rem;width: max-content;font-size: 0.912rem;color: #FFF4E3;font-weight: 500;}
		#list .lists{width: 19.551rem;}
		#list .lists .item{width: 6.498rem;height: 6.498rem; display: flex;flex-direction: column;align-items: center;float:left;}
		#list .lists .item .icon{width: 2.508rem;height: 2.508rem;}
		#list .lists .item .icon img{width: 2.508rem;height: 2.508rem;}
		#list .lists .item .name{color: rgba(255, 255, 255, 0.9);height:1.254rem;line-height:1.254rem;margin:0.342rem 0rem 0rem; text-align: center;font-weight: 500;font-size: 0.741rem;}
		#list .lists .item .desc{color: rgba(255, 255, 255, 0.26);font-size:0.684rem;text-align: center;height: 2.394rem;line-height: 1.254rem;font-weight: 400;}
		#bottom{width: 100%; height: 5.928rem;background: #333231;position:fixed;z-index:1;left:0;bottom:0;}
		#bottom .bottom{width: 19.551rem;height: 3.99rem;display: flex;justify-content: space-between;align-items: center;margin: 0 auto;}
		#bottom .bottom .price{height: 1.482rem;line-height:1.482rem;font-size: 0.798rem;color: #FFE0A2;font-weight: 600;}
		#bottom .bottom .price .m{font-size: 1.254rem;padding:0rem 0.34rem 0rem 0rem;}
		#bottom .bottom .price .d{font-size: 0.741rem;padding: 0px 0.342rem; color: rgba(255, 255, 255, 0.8);font-weight: 400;}
		#bottom .bottom .btn{width: 9.12rem;height: 2.736rem;text-align: center;line-height:2.736rem;background: #FFE0A2;border-radius: 1.368rem;font-size: 0.912rem;color: #333231;font-weight: 400;}
		
		
    </style>
</head>
<body>
<div id="contenter">
    <div id="header">
		<img src="https://resource.njweiyi2.com/7.26.1.png"/>
    </div>
	<div id="content">
		<div class="content">
			<div class="userinfo">
				<div class="avatar">
					<img src="{$data.userinfo.cover}"/>
				</div>
				<div class="name_date">
					<div class="nickname">{$data.userinfo.nickname}</div>
					<div class="date">{$data.userinfo.vip_desc}</div>
				</div>
			</div>
			<div class="list">
				<div class="lists">
					{foreach $data.data as $k=>$v}
					<div class="li {$k == $data.detail_on ?'active':''}" onclick="show(this)" on="{$k}" money="{$v.money}" day="{$v.deadline}" pay_type="{$v.id}">
						{if $v.is_recommend}
						<div class="tj">推荐</div>
						{/if}
						<div class="d">{$v.deadline}</div>
						<div class="m">￥<span>{$v.money}</span></div>
						<div class="t">¥{$v.average_money}/天</div>
					</div>
					{/foreach}

				</div>
			</div>
			{if $data.is_switch == 0}
			<div class="tips"><div class="t">{$data.editor1}</div></div>
			{/if}
		</div>
	</div>
	<div style="height:12.198rem;"></div>
	<div id="list">
		<div class="title">会员特权</div>
		<div class="lists">
			<div class="item">
				<div class="icon"><img src="https://resource.njweiyi2.com/6.30.2.png"/></div>
				<div class="name">无限畅聊</div>
				<div class="desc">聊天不受限制</div>
			</div>
			<div class="item">
				<div class="icon"><img src="https://resource.njweiyi2.com/6.30.3.png"/></div>
				<div class="name">超级喜欢</div>
				<div class="desc">每天一次超级喜欢</div>
			</div>
			<div class="item">
				<div class="icon"><img src="https://resource.njweiyi2.com/6.30.4.png"/></div>
				<div class="name">谁喜欢我</div>
				<div class="desc">每天一次超级喜欢</div>
			</div>
			<div class="item">
				<div class="icon"><img src="https://resource.njweiyi2.com/6.30.5.png"/></div>
				<div class="name">解锁来访</div>
				<div class="desc">解锁全部来访</div>
			</div>
			<div class="item">
				<div class="icon"><img src="https://resource.njweiyi2.com/6.30.6.png"/></div>
				<div class="name">查看更多</div>
				<div class="desc">可以查看更多嘉宾</div>
			</div>
			<div class="item">
				<div class="icon"><img src="https://resource.njweiyi2.com/6.30.7.png"/></div>
				<div class="name">增加曝光</div>
				<div class="desc">增加曝光机会</div>
			</div>
		</div>
	</div>
	<div style="height:8rem;"></div>
    <div id="bottom">
		<div class="bottom">
			<div class="price">
					￥<span class="m"></span>/<span class="d"></span>
			</div>
			<div class="btn">立即支付</div>
		</div>
	</div>
</div>

<script>
	
    var on    = '{$data.detail_on}';      //默认选择值

	var money = $('.active').attr('money');    //金额
	var days = $('.active').attr('day');    //金额
	var uid = getQueryStringByName('uid');
	var openid = getQueryStringByName('openid');
	var collect = "{$Think.get.collect|default='12'}";
	$('#bottom .m').html(money);
	$('#bottom .d').html(days);

    //选项切换
	function show(e){
	
		on    = $(e).attr("on");		
		money = $(e).attr("money");
		days  = $(e).attr("day");
		
		$(".lists .li").attr("class","li");	
		$(e).attr("class","li active");
			
		$(".price .m").html(money);
		$(".price .d").html(days);
		
	}

	$(".btn").one("click", function () {
		// alert(1);
		var type = $('.active').attr("pay_type");
		// if(2 == is_pay){
		// 	is_pay = 1;
			$.ajax({
				'url': '/apinew/v1/member/payMemberH5?uid=' + uid + "&member_type=" + type+"&openid="+openid+"&collect="+collect,
				'dataType': 'json',
				success: function (result) {
					var res = JSON.parse(result);
					if (typeof WeixinJSBridge == "undefined") {
						if (document.addEventListener) {
							document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
						} else if (document.attachEvent) {
							document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
							document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
						}
					} else {
						onBridgeReady(res);
					}

				},
				error: function (e) { }
			});

		// }




	})
	function getQueryStringByName(name) {
		var result = window.location.search.match(new RegExp("[\?\&]" + name + "=([^\&]+)", "i"));
		if (result == null || result.length < 1) {
			return "";
		}
		return result[1];
	}

	function onBridgeReady(res) {
		res = res.data;
		WeixinJSBridge.invoke(
				'getBrandWCPayRequest', {
					appId: res.data.appId, //公众号名称，由商户传入
					timeStamp: res.data.timeStamp, //时间戳，自1970年以来的秒数
					nonceStr: res.data.nonceStr, //随机串
					package: res.data.package, //prepay_id用等式的格式
					signType: res.data.signType, //微信签名方式：
					paySign: res.data.paySign, //微信签名
				}, function (resa) {
					setTimeout(() => {
						window.location.reload();
					}, 1000);
				})
	}




</script>
</body>
</html>

